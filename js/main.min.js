function communitySlider(){new Swiper(".community__slider .swiper-container",{slidesPerView:1,spaceBetween:10,pagination:{el:".community__slider .swiper-pagination",type:"bullets",clickable:!0},breakpoints:{320:{slidesPerView:1},576:{slidesPerView:3,spaceBetween:30}}})}function headSlider(){new Swiper(".main__img.swiper-container",{slidesPerView:1,allowTouchMove:!1,effect:"fade",loop:!0,autoplay:{delay:4e3},speed:1500,fadeEffect:{crossFade:!1},on:{init:function(){let e=document.querySelector(".main__img .swiper-slide-active").getAttribute("data-head-title");document.querySelector(".words-slider").innerHTML=e},slideChange:function(){try{let e=document.querySelector(".main__img .swiper-slide-next").getAttribute("data-head-title");setTimeout(animateWord(e),2e3)}catch(e){console.log(e)}}}})}let advSliders=document.querySelectorAll(".adv .swiper-container");function supportSlider(){new Swiper(".support .swiper-container",{slidesPerView:5,spaceBetween:30,loop:!0,speed:2e3,loopPreventsSlide:!0,autoplay:{delay:2e3},breakpoints:{320:{slidesPerView:"auto",spaceBetween:20},576:{slidesPerView:5,spaceBetween:30}}})}advSliders.length>0&&advSliders.forEach(e=>{new Swiper(".adv .swiper-container",{slidesPerView:"auto",spaceBetween:25,loop:!0,speed:4e3,loopPreventsSlide:!0,autoplay:{delay:0},breakpoints:{320:{spaceBetween:10},576:{spaceBetween:25}}})});let replacements={you:"web3",music:"builders"};function animateWord(e){let i=document.querySelector(".words-slider"),t=document.createElement("span");i.innerHTML="",t.classList.add("words-slider__text"),t.innerHTML=""+(replacements[e]||e),i.append(t),document.querySelector(".words-slider__text").classList.add("words-slider__text--active")}function artSlider(){new Swiper(".main__art-items.swiper-container",{slidesPerView:"auto",loop:!0,autoplay:{delay:4e3},speed:3e3})}function brandSlider(){new Swiper(".community__brands.swiper-container",{slidesPerView:"auto",loop:!0,autoplay:{delay:4e3},speed:3e3})}communitySlider(),supportSlider(),artSlider(),brandSlider(),document.addEventListener("DOMContentLoaded",(function(e){headSlider()}));
let step1Btn=document.querySelector("[data-step='addDomain']"),step2BackBtn=document.querySelector("[data-step='backStep1']"),step2=document.querySelector(".quiz__step2");step1Btn&&(step1Btn.onclick=async function(){window.ethereum&&address?step2.classList.add("quiz__step2--active"):alert("Please, connect MetaMask before.")}),step2BackBtn&&(step2BackBtn.onclick=function(){step2.classList.remove("quiz__step2--active")});
let provider,burger=document.querySelector(".header__burger"),body=document.querySelector("body"),header=document.querySelector("header");burger&&(burger.onclick=function(){header.classList.toggle("header--active"),body.classList.toggle("fixed-body")});try{provider=new ethers.providers.Web3Provider(window.ethereum)}catch(e){console.log(e)}const claim_abi=[{inputs:[{internalType:"string",name:"domain",type:"string"},{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes[]",name:"signatures",type:"bytes[]"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"}];let address,connect_btn=document.querySelector(".connect_btn"),account_btn=document.querySelector(".account_btn");async function connectMetamask(){try{address&&window.open("/domains","_self"),await provider.send("eth_requestAccounts",[]),checkAccount()}catch(e){console.log(e)}}async function checkAccount(){try{let e=provider.getSigner();if(address=await e.getAddress(),address){connect_btn.innerHTML=address.substr(0,6)+"..."+address.substr(38,4);try{getTXTRecord(),getDomains()}catch(e){console.log()}}}catch(e){console.log(e)}}async function claim(){let e=new ethers.Contract("0x3d38fa9B1E78EaA35175B8647b25F41B445dDaCB",claim_abi,provider),t=provider.getSigner();e=e.connect(t);let n=await fetch("/api/airdrop?"+new URLSearchParams({account:await t.getAddress(),domain:"gems.black"})),a=await n.json();e.claim(a.Domain,a.Account,BigInt(a.Value),[ethers.utils.arrayify("0x"+a.Signatures)])}connect_btn.onclick=connectMetamask,checkAccount();let tier=0,offset=0,page=0;async function onEnter(){let e=document.querySelector(".query_value");e&&(e.value=new URLSearchParams(window.location.search).get("search"),e.addEventListener("keypress",(function(e){if("Enter"==e.key){if(e.preventDefault(),"/search"!=window.location.pathname)return void openSearch();search()}})))}async function openSearch(){let e=document.querySelector(".query_value");window.open("/search?search="+e.value,"_self")}onEnter();let prev_query="";async function searchOld(){let e=document.querySelector(".query_value"),t=document.getElementById("results_container"),n=document.getElementById("results_count"),a=document.getElementById("results_loader");if(!t)return;let i=window.location.protocol+"//"+window.location.host+window.location.pathname+"?search="+e.value;window.history.pushState({path:i},"",i),t.innerHTML="",n.innerHTML="",a.classList.remove("hidden"),e.value!=prev_query&&(page=0,pagination(0)),prev_query=e.value;let r=await fetch("/api/search?"+new URLSearchParams({query:e.value,tier:tier,offset:10*page})),o=await r.json();n.innerHTML="About "+o.count+" search results",t.innerHTML="",o.data.forEach(e=>{t.innerHTML+='\n        <div class="domains__row">\n            <div class="domains__info tier'+e.Tier+'">\n                <div class="domains__info-item">'+e.Domain+'</div>\n                <div class="domains__info-item">Tier '+(e.Tier+1)+'</div>\n                <div class="domains__info-item">Tokens: '+tierToTokens(e.Tier)+'</div>\n            </div>\n            <a href="https://search.art.art/en?domain='+e.Domain+'" class="domains__link mbtn mbtn-black">Check avalibility</a>\n        </div>\n        '}),pagination(o.count),a.classList.add("hidden")}async function search(){let e=document.querySelector(".query_value"),t=document.getElementById("results_container"),n=document.getElementById("results_count"),a=document.getElementById("results_loader");if(!t)return;let i=window.location.protocol+"//"+window.location.host+window.location.pathname+"?search="+e.value;window.history.pushState({path:i},"",i),t.innerHTML="",n.innerHTML="",a.classList.remove("hidden"),e.value!=prev_query&&(page=0,pagination(0)),prev_query=e.value;let r=await fetch("/api/v2/search?"+new URLSearchParams({query:e.value,tier:tier,offset:10*page}));r=await r.json(),n.innerHTML="About "+r.total+" search results",t.innerHTML="",r._embedded.items.forEach(e=>{let n=priceToTier(e.price);t.innerHTML+='\n        <div class="domains__row">\n            <div class="domains__info tier'+n+'">\n                <div class="domains__info-item">'+e.name+'</div>\n                <div class="domains__info-item">Tier '+(n+1)+'</div>\n                <div class="domains__info-item">Tokens: '+tierToTokens(n)+'</div>\n            </div>\n            <a href="https://search.art.art/en?domain='+e.name+'" class="domains__link mbtn mbtn-black">Check avalibility</a>\n        </div>\n        '}),pagination(r.total),a.classList.add("hidden")}async function tiers(){let e=document.getElementById("tiers_buttons");if(e){e.children[0].onclick=async function(){tier=0,await tiersUpdate(),offset=0,await search()};for(let t=1;t<10;t++){e.children[t].onclick=async function(){tier=11-t,await tiersUpdate(),offset=0,await search()}}}}async function tiersUpdate(){let e=document.getElementById("tiers_buttons");if(e)for(let t=0;t<10;t++){let n=e.children[t];n.classList.remove("domains__tab--active"),(0==t&&0==tier||0!=t&&tier==11-t)&&n.classList.add("domains__tab--active")}}async function pagination(e){let t=document.getElementById("pagination_buttons");if(t.innerHTML="",0==e)return;let n=Math.floor(e/10),a=new Set([0,1,2,page-1,page,page+1,n-2,n-1,n]);if(page<3){let e=Math.floor(n/2);a.add(e-1),a.add(e),a.add(e+1)}a=[...a],a=a.sort((function(e,t){return e-t}));for(let e=0;e<a.length;e++)if(a[e]>=0&&a[e]<=n){e>0&&a[e-1]+1!=a[e]&&(t.innerHTML+="");let n=a[e]==page?"domains__tab--active":"";t.innerHTML+='<a onclick="set_page(event,'+a[e]+')" class="domains__tab '+n+'">'+(a[e]+1)+"</a>"}}async function set_page(e,t){page=t,e.target.classList.add("domains__tab--active"),search(page)}document.getElementById("search_domains")&&search(),tiers();let tiers_tokens={0:20,1:140,2:220,3:280,4:320,5:560,6:820,7:1820,8:1e4,9:2e4},prices_tier=[0,70,110,140,210,280,410,910,5e3,1e4,1e12];function tierToTokens(e){return tiers_tokens[e]}function priceToTier(e){let t=0;for(i=0;i<prices_tier.length&&e>=prices_tier[i];i++)t=i;return t}async function getDomains(){let e=document.getElementById("tokens_count"),t=document.querySelector(".quiz__table");if(!t)return;let n=await fetch("/api/domains?"+new URLSearchParams({account:address})),a=await n.json();t.innerHTML="";let i=0;a.forEach(e=>{i+=tierToTokens(e.Tier),t.innerHTML+='\n        <div class="domains__row">\n            <div class="domains__info tier'+e.Tier+'">\n                <div class="domains__info-item">'+e.Domain+'</div>\n                <div class="domains__info-item">Tier '+(e.Tier+1)+'</div>\n                <div class="domains__info-item">Exp '+new Date(e.Exp).toLocaleDateString()+'</div>\n                <div class="domains__info-item">Tokens: '+tierToTokens(e.Tier)+"</div>\n            </div>\n        </div>"});let r=await fetch("/api/bonus?"+new URLSearchParams({account:address}));r=await r.json(),e.innerHTML=i+r.total+" tokens"}async function getTXTRecord(){let e=document.querySelector(".txt_record_field");if(!e)return;let t=await fetch("/api/txt-record?"+new URLSearchParams({account:address}));e.value=(await t.json()).txt_record}function copyTXTRecord(){navigator.clipboard.writeText(document.querySelector(".txt_record_field").value)}async function addDomain(){try{let e=provider.getSigner(),t=document.querySelector(".domain_field");if(t.parentElement.classList.remove("quiz__fg_error"),t.value=t.value.toLowerCase(),!/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.art$/.test(t.value))return t.parentElement.classList.add("quiz__fg_error"),void alert("Please, make sure the domain is .art");if(200!=(await fetch("/api/add-domain?"+new URLSearchParams({account:await e.getAddress(),domain:t.value}))).status)return void alert("Please, check TXT record and try it later");await getDomains(),document.querySelector(".quiz__step2").classList.remove("quiz__step2--active")}catch(e){alert("Please, connect MetaMask before.")}}async function suggestion(){let e=document.querySelector(".find__search-link");if(!e)return;let t=await fetch("/api/search?"+new URLSearchParams({suggestion:!0})),n=await t.json();e.innerHTML=n.data[0].Domain,e.href="https://search.art.art/en?domain="+n.data[0].Domain}async function addEmail(e){fetch("/api/add-email?email="+document.getElementById("subscriber_email").value),e.preventDefault(),document.getElementById("subscriber_email").value=""}function twitterBonus(){address?(OAuth.initialize("YC_NlvtF5hzC5dey4jjatFE0Y-4"),OAuth.popup("twitter").done((function(e){console.log(e),fetch("/api/twitter-bonus?"+new URLSearchParams({account:address,...e.toJson()})).then((async function(e){}))}))):alert("Please, connect MetaMask first!")}suggestion();
//# sourceMappingURL=../sourcemaps/main.min.js.map
